graph TB
    subgraph "Frontend (Next.js)"
        A[Home Page /]
        B["Room Page /room/{id}"]
        C[VideoRoom Component]
        D[useWebRTC Hook]
        E[SocketManager Singleton]
    end
    
    subgraph "Server (Socket.IO)"
        F[HTTP Server]
        G[Socket.IO Server]
        H[User State Map]
        I[Room State Map]
        J[Redis Session Store]
    end
    
    subgraph "WebRTC"
        K[SimplePeer Library]
        L[STUN/TURN Servers]
        M[Media Streams]
    end
    
    A --> B
    B --> C
    C --> D
    D --> E
    E <--> G
    G --> H
    G --> I
    G <--> J
    D <--> K
    K <--> L
    K --> M
